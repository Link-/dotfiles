#!/usr/bin/env bash

## git configuration
git config --global push.autoSetupRemote true

#@--------------------------------@#
# Check if homebrew is installed
#@--------------------------------@#
eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"

if ! command -v brew &> /dev/null
then
    echo "Homebrew could not be found. Skipping..."
else
    echo "Installing fzf, bat, tree, jq, mycli"
    HOMEBREW_NO_AUTO_UPDATE=1 brew install fzf bat tree jq mycli

    #@--------------------------------@#
    # Configure fzf
    #   - Install keybindings
    #   - Install shell completion
    #   - Do not update shell configuration files
    #@--------------------------------@#
    echo "Configuring fzf keybindings and shell completion"
    "$(brew --prefix)"/opt/fzf/install --key-bindings --completion --no-update-rc
fi


#@--------------------------------@#
# Install vim pathogen
#@--------------------------------@#
echo "Installing vim pathogen"
mkdir -p ~/.vim/autoload ~/.vim/bundle && \
curl -LSso ~/.vim/autoload/pathogen.vim https://raw.githubusercontent.com/tpope/vim-pathogen/master/autoload/pathogen.vim

#@--------------------------------@#
# Codespaces specific
#@--------------------------------@#
echo "Updating PATH for zsh"
echo "PATH=$PATH:$(brew --prefix)/bin:/home/vscode/.local/bin" >> ~/.zshrc